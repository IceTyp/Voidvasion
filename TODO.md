# TODO

* [ ] add tween animation when switching scenes

* [ ] use pausing scene tree
  * this should
    * pause timer for game time
    * disable placing orbs
    * disable tiles progress

* [ ] find names for difficulties
  * [ ] should fit to theme
    * [ ] which theme?

* [ ] place orbs closer to darkness
  * [ ] but not closer to other orbs

* [ ] improve ui theme
  * [ ] issues with spacing above and below
    * label
    * button
  * [ ] issue when centering text with odd number of pixels in width

* [ ] wait time when only core is left is too long
  * [ ] remove some of its orbits?

* [ ] autoload script
  * [ ] keeps track of number of orbs
    * orbs emit signals to update this number

* [ ] allow placing more orbs when some are broken?

## Issues

* [ ] sometimes neighbors of tiles are not found
  * wait until all tiles are set
  * then, connect signals to neighbors
  * then, emit `arrived`

* [ ] only 15 orbs have light at the same time
  * should be fine
* [ ] weird collision shape of orbs when placed
  * this does not hurt

* [ ] game should work in browser

## Design ideas

* place orbs only at beginning
  * place orbs strategically
  * certain number depending on difficulty
  * then, wait for darkness
  * darkness wins after 1, 2 minutes
    * how long can you last?
  * no cursor orb
    * but still 4 white pixels to highlight where new orbs are placed
      * remove when maximal number of orbs is reached

* [ ] autogenerated maps

* [ ] when orb can be placed
  * highlight/pulsate number for orb

## Game name

* darkness
* light
* light into darkness
* invasion
* lightness
* luminous
* eclipse

## Itch

* [ ] prepare game page
* [ ] screenshots (very late)
* [ ] gifs of game
  * show how placing orbs looks like
  * show how darkness spreads
* [ ] description
  * [ ] rules
  * [ ] goal
  * Small puzzle game where you place light orbs to slow down darkness from spreading.

## Later

* [ ] delete unused images
  * orbs
    * use gradient2d instead?
  * tilemap

## Game setting

* protect orb
  * holy gem in center of map
  * or candle?
  * orb
* darkness invades world
* deploy protective _things_ to delay darkness
  * [ ] specify _things_
    * small gems?
    * small candles?
    * ghosts?
* how long can you delay the darkness?
* [ ] can you win?

## Implementation

* tilemap for ground and darkness
* objects need to detect what's below them
  * collisions for darkness tilemap
* remember border tiles for creation of new tiles
  * set tile `set_cells_terrain_connect`
  * use 4 `custom_data_layers` to tell which adjacent tiles are allowed for new darkness tiles
    * `north`, `east`, `south`, `west`

### Orb placing

* [ ] detect collisions when placing orbs
* [ ] orbs should not be too close to other orbs

* [ ] orb placing with cursor
  * hold/press key
    * 1, 2, 3
  * click somewhere
    * detect collisions

* [ ] child node of map
  * [x] detects when mouse clicked
  * [ ] checks for collisions
    * with tilemap
    * with other orbs
  * places orb at that coordinates

### Orb scene

* inherit
* script
  * `_on_darkness_entered`
    * `queue_free`
    * tween
* export vars for
  * [x] color
    * orb and light
    * single modulate for sprite color and light color
  * [x] size
    * orb and light
  * [ ] strength
    * stronger on closer tiles
    * more range
    * pulsing strength
* orb types
* `core`
* `small_orb`

### Tilemap

* [ ] approaching tiles should not look like a rectangle

* [ ] wait until all tiles are set
  * then, emit `arrived`

* [ ] scenes as tiles?
  * for both, approaching and darkness
  * static body with one pixel collision shape
    * activated, when arrived
  * child area2d for detecting number of orbits
  * approach themselves
    * every random time
    * by random value depending on number of detected orbits
  * have approaching value that determines alpha of modulate
  * emit signal when arrived
    * only neighboring tiles connect to this signal and start approaching

* single pixel tiles
  * 2 types
    * `approaching`
      * modulate changes
        * alpha from 0 to 1
      * changes to `finished`
      * (optional) animation when finished
    * `arrived`
      * collision shape
      * neighbors can approach

* [ ] place darkness tiles by hand
  * for each difficulty map
* [ ] place approaching tiles automatically

## UI

* [ ] display at same position (top center)
  * `orbs left: #`
  * `start`
  * time

* [ ] start darkness (and timer) button
  * `turn off light`
  * `summon darkness`

* [ ] game end screen with text and `copy` button
  * display
    * Congratulations, you lost!
    * Can you survive longer?
    * You can paste your result in the comments!
    * time
    * difficulty
    * orb positions?
    * `copy` button

* (optional) pause game

* [ ] find nice font
  * e.g. 5 height
  * monospace

## Game design

* [ ] buy orbs
  * with what resource?
* [ ] buy cursor orb
  * [ ] or upgrade cursor orb

## Difficulty

* ~~weaker orbs~~
* more initial black tiles
* ~~size of map~~
* different background color

## Graphics

* gem
* darkness
  * animated
  * 4 frames
  * only darkness (no ground)
* background
  * with light possible
* glitch effects?
* protective _things_
* light effects
* ground/floor with variation
* darkness with variation

## Sound

* [ ] dark ambient background sound
* [ ] intensifying darkness sound

### Effects

* [ ] placing orb
* [ ] destroying orb
  * glass shatter
* [ ] pulsating orb

## Credits

* font
* audio
* Godot

## Themes

* Invasion
* Catch â€˜Em All
* Opposite Day
* Cooperation
  * tower defense
* Glitch In The Matrix
* Wildfire
* Recursive
* Creation Story
* But Does It Float?
  * platformer
  * stone
    * weak against water
    * is thrown away when hit by other monsters
  * goal
    1. reach end of level
      * gain float ability 
    2. run back
      * timer?
* Hidden In Plain Sight
